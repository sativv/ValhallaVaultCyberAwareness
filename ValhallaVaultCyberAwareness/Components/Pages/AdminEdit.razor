@page "/Admin/Edit"
@using Microsoft.AspNetCore.Authorization
@using ValhallaVaultCyberAwareness.Components.BComponents
@using ValhallaVaultCyberAwareness.Models
@using ValhallaVaultCyberAwareness.Repository
@attribute [Authorize(Roles = "Admin")]
@rendermode InteractiveServer
@inject NavigationManager navManager
@inject ValhallaUow uow


<button class="btn buttonBorder" @onclick="NavToPage">Add Items</button>
<div class="container vh-100 justify-content-center">
    <div class="row justify-content-center">
        <div class="col-md-8 bg-dark">
          
           
            <EditCategoryComponent Categories="Categories"></EditCategoryComponent>
            <EditSegmentComponent Segments="Segments"></EditSegmentComponent>
            <EditQuestionComponent Questions="Questions"></EditQuestionComponent>
        </div>
    </div>
</div>





@code {
    List<CategoryModel> Categories = new();
    List<SegmentModel> Segments = new();
    List<QuestionModel> Questions = new();
    List<AnswerModel> Answers = new();

    private bool IsCollapsed = true;
    private string CollapseClass => IsCollapsed ? "collapse" : "";

    protected override async Task OnInitializedAsync()
    {
        Categories = await uow.CategoryRepo.GetAllAsync();
        Segments = await uow.SegmentRepo.GetAllAsync();
        Questions = await uow.QuestionRepo.GetAllAsync();
        Answers = await uow.AnswerRepo.GetAllAsync();
    }

    private void NavToPage()
    {
        navManager.NavigateTo("/Admin");
    }
    private void ToggleVisibility()
    {
        IsCollapsed = !IsCollapsed;
    }
}
